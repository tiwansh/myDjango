{% extends 'blog/base.html' %}

{% load staticfiles %}

{%block slideshow-wallpapers%}

{%endblock%}

{% block content %}

<script>
    function compliance(){
        if(confirm("Are you sure you want to delete this post ?")){
            //deletepost
        }
    }
    tinymce.init({
        selector: 'postcontent',  // change this value according to your HTML
        encoding: 'xml'
    });


</script>

{%block title%}
<title>{{post.title}}</title>
{%endblock%}

<div class="post">
    {% if user.is_authenticated and post_author == request_user %}
    <a class="btn btn-default" href="{% url 'post_edit' pk=post.pk %}"><span class="glyphicon glyphicon-pencil"></span></a>
    <a class="btn btn-default" href="{% url 'post_delete' pk=post.pk %}"
       onclick="return confirm('Are you sure you want to delete this post ?')"><span
            class="glyphicon glyphicon-trash"></span></a>
    {% endif %}
    <br>

    <!--Post section begins from here-->

    <h1>{{ post.title }}</h1>
    {% if post.post_image %}
    <img class="img img-responsive" src="{{ post.post_image.url }}" style="height:300px;width:auto">
    <br>
    {% endif %}
    <p id="postcontent">{{ post.text|safe }}</p>
    <br>
    {% if post.published_date %}
    <div class="date pull-right">
        {{ post.published_date }}
    </div>
    {% endif %}
    <br>
    <center><p style="background-color:blue;display:table;border-radius:1px;padding:6px;color:white"><img
            src="{%static 'img/share.png'%}" height="25px" width="25px"><a href="{% url 'post_share' pk=post.pk %}"
                                                                           style="color:white"> Share this post</a>
    </p></center>

    <!--Comment section begins from here-->

    <div>
        <h3>Conversations</h3>
        <hr>
        {% if user.is_authenticated %}
        <div>
            <form action="" method="POST">
                {% csrf_token %}
                {% for field in comment_form %}
                <label class="" style="border:none">Add comment</label>
                <div class="" style="border:none;">{{ field }}</div>
                <br>
                {% endfor %}
                <input class="btn btn-default" type="submit" name="Add comment" value="Add comment">
            </form>
        </div>
        {% endif %}
        <hr>
        <div class="paragraphs">
            {% for comment in comments %}
            <div class="row">
                <div class="span4">
                    <div class="clearfix content-heading">
                        <!--TODO add image of user-->
                        <img src="{{ comment.author.profile.profile_picture.url }}"
                             class="img-responsive img-circle pull-left"
                             style="height:60px;width:60px">
                        <h4>&nbsp;&nbsp;{{ comment.author }}</h4>
                        <p>&nbsp;&nbsp;{{comment.text}}</p>
                    </div>
                </div>
            </div>
            <br>
            {% endfor %}
        </div>
    </div>


</div>
{% endblock %}